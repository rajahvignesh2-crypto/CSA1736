from heapq import heappush, heappop

goal = '123456780'

def h(state):
    return sum(abs((state.index(str(i))//3)-(goal.index(str(i))//3)) +
               abs((state.index(str(i))%3)-(goal.index(str(i))%3)) for i in range(1,9))

def get_moves(state):
    pos = state.index('0')
    x, y = divmod(pos, 3)
    moves = []
    for dx, dy in [(-1,0),(1,0),(0,-1),(0,1)]:
        nx, ny = x+dx, y+dy
        if 0 <= nx < 3 and 0 <= ny < 3:
            npos = nx*3 + ny
            new = list(state)
            new[pos], new[npos] = new[npos], new[pos]
            moves.append(''.join(new))
    return moves

def astar(start):
    pq = [(h(start), 0, start, [])]
    seen = {start}
    while pq:
        f, g, state, path = heappop(pq)
        if state == goal:
            return path + [state]
        for nxt in get_moves(state):
            if nxt not in seen:
                seen.add(nxt)
                heappush(pq, (g+1+h(nxt), g+1, nxt, path+[state]))

start = input("Enter 8-puzzle start state (use 0 for blank): ")
solution = astar(start)
print("\nSolution path:")
for s in solution:
    print(s[:3], s[3:6], s[6:], '\n')
